#!/bin/bash

echo "ğŸš€ Applying blue and green deployments..."
kubectl apply -f blue_deployment.yaml
kubectl apply -f green_deployment.yaml

sleep 5

echo "ğŸ” Checking pods status..."
kubectl get pods -l app=django

echo "ğŸ“œ Fetching logs from green deployment..."
GREEN_POD=$(kubectl get pods -l app=django,version=green -o jsonpath="{.items[0].metadata.name}")
kubectl logs $GREEN_POD

echo "ğŸ“¡ Applying service to point to green version..."
kubectl apply -f kubeservice.yaml

echo "âœ… Blue-Green deployment setup complete."
